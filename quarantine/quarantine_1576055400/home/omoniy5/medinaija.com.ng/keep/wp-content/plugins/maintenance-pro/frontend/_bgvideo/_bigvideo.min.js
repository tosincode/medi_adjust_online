(function(a){if(typeof define==="function"&&define.amd){define(["jquery","video.js","imagesloaded","jquery-ui"],a)}else{a(jQuery,videojs)}})(function(b,a){b.BigVideo=function(f){var q={useFlashForFirefox:true,forceAutoplay:false,controls:true,doLoop:false,container:b("body")};var k=this,u,B="#big-video-vid",o=b('<div id="big-video-wrap"></div>'),x=b(""),e=16/9,i=0,l=0.8,v=false,c=false,h=false,s=false,d=false,z=[],r,w;var A=b.extend({},q,f);function y(){var D=b(window).width();var E=b(window).height();var C=D/E;if(C<e){if(w==="video"){u.width(E*e).height(E);b(B).css("top",0).css("left",-(E*e-D)/2).css("height",E);b(B+"_html5_api").css("width",E*e);b(B+"_flash_api").css("width",E*e).css("height",E)}else{b("#big-video-image").css({width:"auto",height:E,top:0,left:-(E*e-D)/2})}}else{if(w==="video"){u.width(D).height(D/e);b(B).css("top",-(D/e-E)/2).css("left",0).css("height",D/e);b(B+"_html5_api").css("width","100%");b(B+"_flash_api").css("width",D).css("height",D/e)}else{b("#big-video-image").css({width:D,height:"auto",top:-(D/e-E)/2,left:0})}}}function t(){var C='<div id="big-video-control-container">';C+='<div id="big-video-control">';C+='<a href="#" id="big-video-control-play"></a>';C+='<div id="big-video-control-middle">';C+='<div id="big-video-control-bar">';C+='<div id="big-video-control-bound-left"></div>';C+='<div id="big-video-control-progress"></div>';C+='<div id="big-video-control-track"></div>';C+='<div id="big-video-control-bound-right"></div>';C+="</div>";C+="</div>";C+='<div id="big-video-control-timer"></div>';C+="</div>";C+="</div>";A.container.append(C);b("#big-video-control-container").css("display","none");b("#big-video-control-track").slider({animate:true,step:0.01,slide:function(E,D){c=true;b("#big-video-control-progress").css("width",(D.value-0.16)+"%");u.currentTime((D.value/100)*u.duration())},stop:function(E,D){c=false;u.currentTime((D.value/100)*u.duration())}});b("#big-video-control-bar").click(function(D){u.currentTime((D.offsetX/b(this).width())*u.duration())});b("#big-video-control-play").click(function(D){D.preventDefault();g("toggle")});u.on("timeupdate",function(){if(!c&&(u.currentTime()/u.duration())){var D=u.currentTime();var F=Math.floor(D/60);var G=Math.floor(D)-(60*F);if(G<10){G="0"+G}var E=u.currentTime()/u.duration()*100;b("#big-video-control-track").slider("value",E);b("#big-video-control-progress").css("width",(E-0.16)+"%");b("#big-video-control-timer").text(F+":"+G+"/"+i)}})}function g(C){var D=C||"toggle";if(D==="toggle"){D=h?"pause":"play"}if(D==="pause"){u.pause();b("#big-video-control-play").css("background-position","-16px");h=false}else{if(D==="play"){u.play();b("#big-video-control-play").css("background-position","0");h=true}}}function n(){u.play();A.container.off("click",n)}function m(){r++;if(r===z.length){r=0}p(z[r])}function p(C){b(B).css("display","block");w="video";u.src(C);h=true;if(d){b("#big-video-control-container").css("display","none");u.ready(function(){u.volume(0)});doLoop=true}else{b("#big-video-control-container").css("display","block");u.ready(function(){u.volume(l)});doLoop=false}b("#big-video-image").css("display","none");b(B).css("display","block")}function j(D){b("#big-video-image").remove();u.pause();b(B).css("display","none");b("#big-video-control-container").css("display","none");w="image";var C=b('<img id="big-video-image" src='+D+" />");o.append(C);b("#big-video-image").imagesLoaded(function(){e=b("#big-video-image").width()/b("#big-video-image").height();y()})}k.init=function(){if(!v){A.container.prepend(o);var E=A.forceAutoplay?"autoplay":"";u=b('<video id="'+B.substr(1)+'" class="video-js vjs-default-skin" preload="auto" data-setup="{}" '+E+" webkit-playsinline></video>");u.css("position","absolute");o.append(u);var D=["html5","flash"];var C=navigator.userAgent.toLowerCase();var F=C.indexOf("firefox")!=-1;if(A.useFlashForFirefox&&(F)){D=["flash","html5"]}u=a(B.substr(1),{controls:false,autoplay:true,preload:"auto",techOrder:D});if(A.controls){t()}y();v=true;h=false;if(A.forceAutoplay){b("body").on("click",n)}b("#big-video-vid_flash_api").attr("scale","noborder").attr("width","100%").attr("height","100%");b(window).resize(function(){y()});u.on("loadedmetadata",function(I){if(document.getElementById("big-video-vid_flash_api")){e=document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoWidth")/document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoHeight")}else{e=b("#big-video-vid_html5_api").prop("videoWidth")/b("#big-video-vid_html5_api").prop("videoHeight")}y();var H=Math.round(u.duration());var G=Math.floor(H/60);var J=H-G*60;if(J<10){J="0"+J}i=G+":"+J});u.on("ended",function(){if(A.doLoop){u.currentTime(0);u.play()}if(s){m()}})}};k.show=function(E,C){if(C===undefined){C={}}d=C.ambient===true;if(d||C.doLoop){A.doLoop=true}if(typeof(E)==="string"){var D=E.substring(E.lastIndexOf(".")+1);if(D==="jpg"||D==="gif"||D==="png"){j(E)}else{if(C.altSource&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1){E=C.altSource}p(E);s=false}}else{z=E;r=0;p(z[r]);s=true}};k.getPlayer=function(){return u};k.triggerPlayer=function(C){g(C)}}});